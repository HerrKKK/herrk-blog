<html>

<head>
    <meta charset="UTF-8">
    <title>Home Page</title>
    <link rel="stylesheet" type="text/css" href="/css/index.css"/>
</head>

<script>

    function printTime() {
        var d = new Date();
        var h = d.getHours();
        var m = d.getMinutes();
        var s = d.getSeconds();
        if (10 > h) {
            h = "0" + h;
        }
        if (10 > m) {
            m = "0" + m;
        }
        if (10 > s) {
            s = "0" + s;
        }

        document.getElementById("time").innerHTML= h + ":" + m + ":" + s;
    }

    function getClickCount() {
        var xmlHttp = new XMLHttpRequest();
        xmlHttp.onreadystatechange = function() {
            if (4 == xmlHttp.readyState && 200 == xmlHttp.status) {
                document.getElementById("click_count").innerHTML = xmlHttp.responseText;
            }
        }
        xmlHttp.open("POST", "clickcount", true);
        xmlHttp.send();
    }

    function autoLogin() {
        var token = sessionStorage.getItem("token");
        if (null == token) {
            document.getElementById("signBtn").style.display = "block";
            document.getElementById("loginName").style.display = "none";
            return;
        }
        var xmlHttp = new XMLHttpRequest();
        xmlHttp.onreadystatechange = function() {
            if (4 == xmlHttp.readyState && 200 == xmlHttp.status) {
                if (null != xmlHttp.responseText && "fail" != xmlHttp.responseText) {
                    document.getElementById("signBtn").style.display = "none";
                    document.getElementById("loginName").style.display = "block";
                    document.getElementById("loginName").innerHTML = xmlHttp.responseText;

                } else {
                    document.getElementById("signBtn").style.display = "block";
                    document.getElementById("loginName").style.display = "none";
                }

            }
        }

        xmlHttp.open("POST", "usermanage", true);
        xmlHttp.setRequestHeader('content-type', 'application/x-www-form-urlencoded');
        var parameter = 'action=token&username=admin&token='+token;
        xmlHttp.send(parameter);
    }

    /* Here is the script loaded when the page is opened */
    setInterval(printTime,1000);
    getClickCount();
    autoLogin();

</script>

<body>
    <div id = page>
        <div id = topFrame>
            <div id = homeBtn>
                <a href="/">HOME</a>
            </div>
            <span id = signBtn>
                <a href="/signup.html">Sign Up</a>
                <a href="/login.html">Sign In</a>
                <a href="https://t.me/dayazhuanjia">Telegram: @dayazhuanjia</a>
            </span>
            <span id = loginName>
                <a href="/"></a>
            </span>
        </div>
        <div id = mainFrame>
            <div id = leftFrame>
                <div id = "list-container">
                <ul id = list1>
                    <li><a href="/login.html">Category 1</a></li>
                    <li><a href="/login.html">Category 2</a></li>
                    <li><a href="/login.html">Category 3</a></li>
                    <li><a href="/login.html">Category 4</a></li>
                    <li><a href="/login.html">Category 5</a></li>
                </ul>
                </div>
            </div>
            <div id = rightFrame>
                <div id = rightPanel style="border: 2px ridge grey">
                    <div id = time>
                    </div>
                    <div id = click_panel style="margin-top: 2rem;">
                        <div id = click_text>Page  Total</br>Click Count: </div>
                        <div id = click_count></div>
                    </div>
                </div>
            </div>
            <div id = centerFrame>
                <div id = homeMargin>
                </div>
                <div class = articleZone>
                    <div class = article>
                        <span align = "left">
                            Finally I have built a quite useful framework of a web page.</br>
                            I will learn javascript to make it able to interact with my back-end in next few days.</br>
                            Then I will come back to Java and focus on the Back-end.</br>
                            Further more, I would make a plan for next study steps this weekend.</br>
                            2020/06/04</br>
                        </span>
                    </div>
                    <div class = article>
                        <span align = "left">
                            Today I added the adaptive layout to the page.</br>
                            I have substantively grasped the basic method of using js.</br>
                            And I found it indispensible to master MySQL to propel the work further.</br>
                            I would do that as well as the study plan mentioned yesterday</br>
                            2020/06/05</br>
                        </span>
                    </div>
                    <div class = article>
                        <span align = "left">
                            Today I added a simple but avilible and secure sign in and up system.</br>
                            encrypt user's password with MD5 and then encrypt it again after adding salt to it</br>
                            The salt was generated by secure java method and different for each person</br>
                            I would study SQL further and make plans tommorow</br>
                            2020/06/06 actually 7th</br>
                        </span>
                    </div>
                    <div class = article>
                        <span align = "left">
                            No progress today and I will focus on learning english in the next weeks</br>
                            to cope with possibly avilible IELTS exam on July 2th</br>
                            2020/06/07</br>
                        </span>
                    </div>
                    <div class = article>
                        <span align = "left">
                            Added time and click count panel on the main page</br>
                            I must reduce the effort poured in this page and focus more on IELTS and PTE</br>
                            It is said that IELTS cannot be held until October</br>
                            2020/06/09</br>
                        </span>
                    </div>
                    <div class = article>
                        <span align = "left">
                            The BIGGEST commit so far!</br>
                            Almost complete the auto-login system</br>
                            2020/06/13</br>
                        </span>
                    </div>
                    <div class = article>
                        <span align = "left">
                            Auto login system is availible!</br>
                            Next step is to beautify the log in and sign up page</br>
                            and optimize signup procedure</br>
                            2020/06/14</br>
                        </span>
                    </div>
                    <div class = article>
                        <span align = "left">
                            Remake the login page into a gorgeous one!</br>
                            It is the assistant!</br>
                            Refered to a customized css sheet.</br>
                            2020/06/23</br>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>